{% extends 'base.html' %}

{% block main %}
  <style>
    .dashboard-container {
      padding: 20px;
      background-color: #f4f6f8;
      border-radius: 8px;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin-bottom: 30px;
    }

    .dashboard-card {
      background-color: #fff;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      border-left: 5px solid; /* Cor da borda será definida individualmente */
    }

    .card-title {
      font-size: 1.5em;
      margin-bottom: 15px;
      color: #333;
    }

    .card-info {
      font-size: 1.1em;
      color: #555;
      margin-bottom: 10px;
    }

    .card-highlight {
      font-size: 1.3em;
      font-weight: bold;
      color: #0077cc; /* Cor padrão de destaque */
    }

    .sales-card {
      border-left-color: #007bff;
    }

    .revenue-card {
      border-left-color: #28a745;
    }

    .top-user-card {
      border-left-color: #ffc107;
    }

    .top-users-card {
      border-left-color: #17a2b8;
    }

    .product-psiu-card {
      border-left-color: #6f42c1;
    }

    .product-estrela-card {
      border-left-color: #e83e8c;
    }

    .product-agua-card {
      border-left-color: #00c853; /* Um verde diferente para água */
    }

    .top-users-list {
      padding-left: 20px;
    }
  </style>

  <div class="dashboard-container">
    <h1>Dashboard Administrativo</h1>

    <div class="dashboard-grid">

      <div class="dashboard-card sales-card">
        <h3 class="card-title">Vendas</h3>
        <p class="card-info">Hoje: <span class="card-highlight">{{ total_vendas_hoje }}</span></p>
        <p class="card-info">Este Mês: <span class="card-highlight">{{ total_vendas_mes }}</span></p>
        <p class="card-info">Total Geral: <span class="card-highlight">{{ total_vendas_geral }}</span></p>
      </div>

      <div class="dashboard-card revenue-card">
        <h3 class="card-title">Arrecadação em Dinheiro</h3>
        <p class="card-info">Hoje: <span class="card-highlight">R$ {{ total_dinheiro_hoje|floatformat:2 }}</span></p>
        <p class="card-info">Este Mês: <span class="card-highlight">R$ {{ total_dinheiro_mes|floatformat:2 }}</span></p>
        <p class="card-info">Total Geral: <span class="card-highlight">R$ {{ total_dinheiro_geral|floatformat:2 }}</span></p>
      </div>

      <div class="dashboard-card top-user-card">
        <h3 class="card-title">Usuário com Mais Pedidos</h3>
        {% if usuario_mais_pedidos %}
          <p class="card-info">{{ usuario_mais_pedidos.username }}</p>
          <p class="card-info"><span class="card-highlight">{{ usuario_mais_pedidos.num_pedidos }}</span> pedidos</p>
        {% else %}
          <p class="card-info">Nenhum pedido realizado ainda.</p>
        {% endif %}
      </div>

      <div class="dashboard-card top-users-card">
        <h3 class="card-title">Top 5 Usuários por Pedidos</h3>
        {% if top_usuarios_pedidos %}
          <ol class="top-users-list">
            {% for user in top_usuarios_pedidos %}
              <li><span class="card-highlight">{{ user.username }}</span> ({{ user.num_pedidos }} pedidos)</li>
            {% endfor %}
          </ol>
        {% else %}
          <p class="card-info">Nenhum pedido realizado ainda.</p>
        {% endif %}
      </div>

      {% if total_agua_mes is not none %}
        <div class="dashboard-card product-agua-card">
            <h3 class="card-title">Quantidade de Água Vendida</h3>
            <p class="card-info"><span class="card-highlight">{{ total_agua_mes }}</span> unidades</p>
        </div>
    {% else %}
        <div class="dashboard-card product-agua-card">
            <h3 class="card-title">Quantidade de Água Vendida</h3>
            <p class="card-info">Nenhuma água foi vendida este mês.</p>
        </div>
    {% endif %}

      {% if total_psiu is not None %}
        <div class="dashboard-card product-psiu-card">
          <h3 class="card-title">Total de Psiu Vendido</h3>
          <p class="card-info"><span class="card-highlight">{{ total_psiu }}</span> unidades</p>
        </div>
      {% endif %}

      {% if total_estrela is not None %}
        <div class="dashboard-card product-estrela-card">
          <h3 class="card-title">Total de Estrela Vendido</h3>
          <p class="card-info"><span class="card-highlight">{{ total_estrela }}</span> unidades</p>
        </div>
      {% endif %}

    </div>
  </div>
{% endblock %}